<dashboard>
  <label>2020 Lateness</label>
  <row>
    <panel>
      <title>2020 Lateness</title>
      <chart>
        <search>
          <query>index=main late!=999 earliest="1/5/2020:4:0:0" latest="4/18/2020:0:0:0" 
| timechart span=1d 
    max(late) by trainno 
    limit=100 
| foreach * 
    [ eval lates=mvappend(lates, '&lt;&lt;FIELD&gt;&gt;')] 
| fields _time lates 
| mvexpand lates 
| eval lateness=case(
    lates &gt; 5, "&gt; 5 min", 
    true(), "&lt;= 5 min") 
| timechart span=1d count by lateness 
| eval total='&lt;= 5 min' + '&gt; 5 min' 
| eval pct_late = '&gt; 5 min'/total * 100 
| fields - total
| rename "&lt;= 5 min" as "5 Min Late or Less" 
    | rename "&gt; 5 min" as "Over 5 Min Late" 
    | rename pct_late as "Percent Late"</query>
          <earliest>-1h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.text">Percent Late</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.abbreviation">none</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.abbreviation">none</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.abbreviation">none</option>
        <option name="charting.axisY2.enabled">1</option>
        <option name="charting.axisY2.maximumNumber">100</option>
        <option name="charting.axisY2.minimumNumber">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.overlayFields">"Percent Late"</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.mode">standard</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.lineWidth">2</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <title>2020 Lateness Weekly</title>
      <chart>
        <search>
          <query>index=main late!=999 earliest="1/5/2020:4:0:0" latest="4/18/2020:0:0:0" 
| timechart span=1d 
    max(late) by trainno 
    limit=100 
| foreach * 
    [ eval lates=mvappend(lates, '&lt;&lt;FIELD&gt;&gt;')] 
| fields _time lates 
| mvexpand lates 
| eval lateness=case(
    lates &gt; 5, "&gt; 5 min", 
    true(), "&lt;= 5 min") 
| timechart span=1d count by lateness 
| eval total='&lt;= 5 min' + '&gt; 5 min' 
| eval pct_late = '&gt; 5 min'/total * 100 
| fields - total 
| timechart span=1w 
    sum("&lt;= 5 min") as "5 Min Late or Less" 
    sum("&gt; 5 min") as "Over 5 Min Late" 
    avg(pct_late) as "Percent Late"</query>
          <earliest>-1h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.text">Percent Late</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.abbreviation">none</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.abbreviation">none</option>
        <option name="charting.axisY.maximumNumber">600</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.abbreviation">none</option>
        <option name="charting.axisY2.enabled">1</option>
        <option name="charting.axisY2.maximumNumber">100</option>
        <option name="charting.axisY2.minimumNumber">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.overlayFields">"Percent Late"</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.mode">standard</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.lineWidth">2</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <title>2020 Lateness Weekly (Weekday Only)</title>
      <chart>
        <search>
          <query>index=main late!=999 earliest="1/5/2020:4:0:0" latest="4/18/2020:0:0:0" 
    date_wday != "saturday" AND date_wday != "sunday" 
| timechart span=1d 
    max(late) by trainno 
    limit=100 
| foreach * 
    [ eval lates=mvappend(lates, '&lt;&lt;FIELD&gt;&gt;')] 
| fields _time lates 
| mvexpand lates 
| eval lateness=case(
    lates &gt; 5, "&gt; 5 min", 
    true(), "&lt;= 5 min") 
| timechart span=1d count by lateness 
| eval total='&lt;= 5 min' + '&gt; 5 min' 
| eval pct_late = '&gt; 5 min'/total * 100 
| fields - total 
| fields - total 
| timechart span=1w 
    sum("&lt;= 5 min") as "5 Min Late or Less" 
    sum("&gt; 5 min") as "Over 5 Min Late" 
    avg(pct_late) as "Percent Late"</query>
          <earliest>-1h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.abbreviation">none</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.abbreviation">none</option>
        <option name="charting.axisY.maximumNumber">600</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.abbreviation">none</option>
        <option name="charting.axisY2.enabled">1</option>
        <option name="charting.axisY2.maximumNumber">100</option>
        <option name="charting.axisY2.minimumNumber">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.overlayFields">"Percent Late"</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.mode">standard</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.lineWidth">2</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <title>2020 Lateness Weekly (Weekend Only)</title>
      <chart>
        <search>
          <query>index=main late!=999 earliest="1/5/2020:4:0:0" latest="4/18/2020:0:0:0" 
    (date_wday = "saturday" OR date_wday = "sunday" ) 
| timechart span=1d 
    max(late) by trainno 
    limit=100 
| foreach * 
    [ eval lates=mvappend(lates, '&lt;&lt;FIELD&gt;&gt;')] 
| fields _time lates 
| mvexpand lates 
| eval lateness=case(
    lates &gt; 5, "&gt; 5 min", 
    true(), "&lt;= 5 min") 
| timechart span=1d count by lateness 
| eval total='&lt;= 5 min' + '&gt; 5 min' 
| eval pct_late = '&gt; 5 min'/total * 100 
| fields - total 
| timechart span=1w 
    sum("&lt;= 5 min") as "5 Min Late or Less" 
    sum("&gt; 5 min") as "Over 5 Min Late" 
    avg(pct_late) as "Percent Late"</query>
          <earliest>-1h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.abbreviation">none</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.abbreviation">none</option>
        <option name="charting.axisY.maximumNumber">250</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.abbreviation">none</option>
        <option name="charting.axisY2.enabled">1</option>
        <option name="charting.axisY2.maximumNumber">100</option>
        <option name="charting.axisY2.minimumNumber">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.overlayFields">"Percent Late"</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.mode">standard</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.lineWidth">2</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
      </chart>
    </panel>
  </row>
</dashboard>